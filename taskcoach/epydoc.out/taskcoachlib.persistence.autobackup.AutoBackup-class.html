<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>taskcoachlib.persistence.autobackup.AutoBackup</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="taskcoachlib-module.html">Package&nbsp;taskcoachlib</a> ::
        <a href="taskcoachlib.persistence-module.html">Package&nbsp;persistence</a> ::
        <a href="taskcoachlib.persistence.autobackup-module.html">Module&nbsp;autobackup</a> ::
        Class&nbsp;AutoBackup
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="taskcoachlib.persistence.autobackup.AutoBackup-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class AutoBackup</h1><p class="nomargin-top"><span class="codelink"><a href="taskcoachlib.persistence.autobackup-pysrc.html#AutoBackup">source&nbsp;code</a></span></p>
<pre class="base-tree">
object --+
         |
        <strong class="uidshort">AutoBackup</strong>
</pre>

<hr />
<p>If backups are on, AutoBackup creates a backup copy of the task file 
  before it is overwritten. To prevent the number of backups growing 
  indefinitely, AutoBackup removes older backups.</p>

<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="taskcoachlib.persistence.autobackup.AutoBackup-class.html#__init__" class="summary-sig-name">__init__</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">settings</span>,
        <span class="summary-sig-arg">copyfile</span>=<span class="summary-sig-default">shutil.copyfile</span>)</span><br />
      x.__init__(...) initializes x; see help(type(x)) for signature</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="taskcoachlib.persistence.autobackup-pysrc.html#AutoBackup.__init__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="onTaskFileAboutToSave"></a><span class="summary-sig-name">onTaskFileAboutToSave</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">taskFile</span>)</span><br />
      Just before a task file is about to be saved, and backups are on, 
      create a backup and remove extraneous backup files.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="taskcoachlib.persistence.autobackup-pysrc.html#AutoBackup.onTaskFileAboutToSave">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="needBackup"></a><span class="summary-sig-name">needBackup</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">taskFile</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="taskcoachlib.persistence.autobackup-pysrc.html#AutoBackup.needBackup">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="createBackup"></a><span class="summary-sig-name">createBackup</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">taskFile</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="taskcoachlib.persistence.autobackup-pysrc.html#AutoBackup.createBackup">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="removeExtraneousBackupFiles"></a><span class="summary-sig-name">removeExtraneousBackupFiles</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">taskFile</span>,
        <span class="summary-sig-arg">remove</span>=<span class="summary-sig-default">os.remove</span>,
        <span class="summary-sig-arg">glob</span>=<span class="summary-sig-default">glob.glob</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="taskcoachlib.persistence.autobackup-pysrc.html#AutoBackup.removeExtraneousBackupFiles">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="numberOfExtraneousBackupFiles"></a><span class="summary-sig-name">numberOfExtraneousBackupFiles</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">backupFiles</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="taskcoachlib.persistence.autobackup-pysrc.html#AutoBackup.numberOfExtraneousBackupFiles">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="taskcoachlib.persistence.autobackup.AutoBackup-class.html#maxNrOfBackupFiles" class="summary-sig-name">maxNrOfBackupFiles</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">backupFiles</span>)</span><br />
      The maximum number of backup files we keep depends on the age of the 
      oldest backup file.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="taskcoachlib.persistence.autobackup-pysrc.html#AutoBackup.maxNrOfBackupFiles">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="taskcoachlib.persistence.autobackup.AutoBackup-class.html#leastUniqueBackupFile" class="summary-sig-name">leastUniqueBackupFile</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">backupFiles</span>)</span><br />
      Find the backupFile that is closest (in time) to its neighbors, i.e.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="taskcoachlib.persistence.autobackup-pysrc.html#AutoBackup.leastUniqueBackupFile">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__delattr__</code>,
      <code>__format__</code>,
      <code>__getattribute__</code>,
      <code>__hash__</code>,
      <code>__new__</code>,
      <code>__reduce__</code>,
      <code>__reduce_ex__</code>,
      <code>__repr__</code>,
      <code>__setattr__</code>,
      <code>__sizeof__</code>,
      <code>__str__</code>,
      <code>__subclasshook__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== STATIC METHODS ==================== -->
<a name="section-StaticMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Static Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-StaticMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="backupFiles"></a><span class="summary-sig-name">backupFiles</span>(<span class="summary-sig-arg">taskFile</span>,
        <span class="summary-sig-arg">glob</span>=<span class="summary-sig-default">glob.glob</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="taskcoachlib.persistence.autobackup-pysrc.html#AutoBackup.backupFiles">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="backupFilename"></a><span class="summary-sig-name">backupFilename</span>(<span class="summary-sig-arg">taskFile</span>,
        <span class="summary-sig-arg">now</span>=<span class="summary-sig-default">date.DateTime.now</span>)</span><br />
      Generate a backup filename by adding '.bak' to the end and by 
      inserting a date-time string in the filename.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="taskcoachlib.persistence.autobackup-pysrc.html#AutoBackup.backupFilename">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="backupDateTime"></a><span class="summary-sig-name">backupDateTime</span>(<span class="summary-sig-arg">backupFilename</span>)</span><br />
      Parse the date and time from the filename and return a DateTime 
      instance.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="taskcoachlib.persistence.autobackup-pysrc.html#AutoBackup.backupDateTime">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== CLASS VARIABLES ==================== -->
<a name="section-ClassVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="minNrOfBackupFiles"></a><span class="summary-name">minNrOfBackupFiles</span> = <code title="3">3</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="maxNrOfBackupFilesToRemoveAtOnce"></a><span class="summary-name">maxNrOfBackupFilesToRemoveAtOnce</span> = <code title="3">3</code>
    </td>
  </tr>
</table>
<!-- ==================== PROPERTIES ==================== -->
<a name="section-Properties"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Properties</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Properties"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__class__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="__init__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">__init__</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">settings</span>,
        <span class="sig-arg">copyfile</span>=<span class="sig-default">shutil.copyfile</span>)</span>
    <br /><em class="fname">(Constructor)</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="taskcoachlib.persistence.autobackup-pysrc.html#AutoBackup.__init__">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
  <dl class="fields">
    <dt>Overrides:
        object.__init__
        <dd><em class="note">(inherited documentation)</em></dd>
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="maxNrOfBackupFiles"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">maxNrOfBackupFiles</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">backupFiles</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="taskcoachlib.persistence.autobackup-pysrc.html#AutoBackup.maxNrOfBackupFiles">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>The maximum number of backup files we keep depends on the age of the 
  oldest backup file. The older the oldest backup file (that is never 
  removed), the more backup files we keep.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="leastUniqueBackupFile"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">leastUniqueBackupFile</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">backupFiles</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="taskcoachlib.persistence.autobackup-pysrc.html#AutoBackup.leastUniqueBackupFile">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Find the backupFile that is closest (in time) to its neighbors, i.e. 
  that is the least unique. Ignore the oldest and newest backups.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Mon Nov 25 04:13:41 2013
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
